---
layout: post
title: MacOS 업그레이드할 때 OSinstll.mpkg 오류 해결하기
date: 2018-08-26
tags: [troubleshooting]
---

얼마 전, 새 아이폰을 구입하면서 백업파일을 새 폰에 적용하느라 엄청 고생했다. iOS12 베타버전을 적용한 상태로 백업한 게 문제였다. 최신 정식 버전의 아이튠즈임에도 베타 버전의 백업본을 새 아이폰에 적용할 수 없었다. 결국 백업을 적용하는 데 성공하긴 했지만, 아직까지도 아이폰을 아이튠즈와 연동하지 못했다. 그냥 iOS12 정식 버전이 나오길 기다리기로 했다.

한 번 이런 일을 겪고 나니, 내 나이든 맥북도 모하비가 나오기 전에 하이시에라로 미리 업그레이드를 해둬야겠다는 생각이 들었다. 휴일을 맞이해 업그레이드를 시도했다. 항상 그랬듯 깔끔하게 업그레이드가 될 것이라 기대했는데 맥북이 오류를 내고 뻗었다.

> "/system/installation/packages/osinstall.mpkg 경로가 유실되거나 손상된 것으로 보입니다."

몇 번 더 시도했지만 동일한 오류가 반복돼 결국 구글링을 시작했다. [현재 상황에 적합해 보이는 해결책](https://apple.stackexchange.com/a/299977)을 하나 발견했다. 답변에는 아래의 방법을 추천하고 있었다.

````sh
$ find / -name OSInstall.mpkg # Will be found somewhere in a tmp directory
$ mkdir -p "/Volumes/Macintosh HD/System/Installation/Packages"
$ cp "<OSInstall.mpkg path>" "/Volumes/Macintosh HD/System/Installation/Packages/"
# reboot
````

에러 메시지의 원인을 `osinstall.mpkg`를 찾지 못해서라고 가정하고, 로컬 복구시스템의 터미널을 이용해 해당 경로로 파일을 옮겨주는 방법이었다. 하지만 나의 경우에는 터미널로 접속해 `find` 명령을 실행해도 `osinstall.mpkg`을 찾을 수 없었다. 결국 다른 방법을 시도했다. 애플 고객지원 웹사이트에서 디스크 유틸리티를 활용해 [디스크 복구하기](https://support.apple.com/ko-kr/guide/disk-utility/dskutl1040/mac)라는 글을 보고 이 방법으로 업그레이드를 정상적으로 진행할 수 있었다.

이 방법을 요약하면, 디스크 유틸리티를 이용해 오류가 발생한 디스크에 검사/복구를 실행한 후 업그레이드를 계속 진행하는 방식이다.

디스크 유틸리티는 맥북이 재시동될 때 `Command` + `R`을 입력하면 실행할 수 있다. 디스크 유틸리티에 들어가면 상단 메뉴의 [보기] > [모든 기기 보기]를 선택해 복구할 디스크를 선택한다. 이후 [검사/복구] > [실행] 버튼을 순차적으로 클릭한다. 이렇게 해서 디스크를 복구한 후 재실행한다. 이후 하이시에라로 이상없이 업그레이드를 진행할 수 있었다.

아이폰도, 맥북도 항상 오류없이 깔끔하게 업그레이드를 진행했기에 방심하고 있었는데 이번에는 두 기기 모두 오류로 애를 먹었다. 2013년에 구입한 맥북이지만 큰 불편함 없이 잘 사용하고 있어서 2020년까지 쭉 사용할 생각이다. 그런데 업그레이드 중에 오류 화면을 한번 보고 나니까 괜히 더 좋은 맥북이 갖고 싶어진다. 2015년이나 2016년형 맥북을 한 번 알아볼까. 뭐, 당장 사진 않겠지만.
