---
layout: post
title: 42Cursus Exam Rank03
date: 2020-12-14
tags: [42seoul, forty-two, 42cursus]
---

## 기본 정보

- 과제명: mini_paint, micro_paint
- 제출파일: `*.c` `*.h`
- 허용함수: `fopen`, `fread`, `fscanf`, `fclose`, `write`, `malloc`, `calloc`, `realloc`, `free`, `memset`, `powf`, `sqrtf`

## 공통 사항

- 실행명령파일(operation file)을 읽어서 터미널에 결과를 출력한다.
- 실행명령파일의 경로를 프로그램의 인자로 받으며, 인자가 없거나, 1개 이상일 경우에는 아래의 에러를 표준출력(`STDOUT`)에 출력한다.

> Error: argument

예시:

```sh
$> ./mini_paint | cat -e
Error: argument$
$> ./mini_paint do not fear mathematics | cat -e
Error: argument$
$>
```

참고: `micro_paint`도 동일한 내용이므로 `./micro_paint` 실행 예시는 별도로 남기지 않는다. 앞으로도 `mini_paint`를 예시로 쓰면서, 둘이 다른 내용일 경우에만 명시하겠다.

실행명령파일을 열거나 읽을 때 문제가 발생하면 아래의 메시지를 표준출력에 출력한다.

> Error: Operation file corrupted

실행명령파일은 각 줄마다 하나의 실맹명령을 가진다. 만약 행이 적절하지 않다면, 에러를 발생한다.

- 에러가 발생하면 프로그램은 반드시 `1`을 리턴해야 한다.
- 에러가 없다면 반드시 `0`을 반환한다.
- 마지막 행에는 개행(`\n`)이 있을 수도, 없을 수도 있다.
- 행은 순서대로 읽으므로 실행명령도 반드시 동일한 순서로 실행해야 한다.
- 행의 각 변수 사이에는 반드시 하나의 공백이 있다.

### 첫번째 행: WIDTH HEIGHT BACKGROUND_CHAR

- 이 행은 항상 파일의 첫 번째 줄이며, 도형을 그릴 구역(zone)을 정의한다.
- 도형을 그리는 구역 밖에는 어떤 것도 출력해서는 안된다.
- 이 행은 반드시 하나만 있다.
- `WIDTH`: 0 < `WIDTH` <= 300 크기의, 행의 배경문자 개수(행 길이)
- `HEIGHT`: 0 < `HEIGHT` <= 300 크기의, 열의 배경문자 개수(열 길이)
- `BACKGROUND_CHAR`: 도형을 그릴 구역의 빈 공간을 채울 문자

이후부터는 Micro_paint와 Mini_paint의 실행명령파일의 형태가 다르므로 각각 정리하겠다.

## Micro_paint

윤곽선만 있는 사각형(`r`) 또는 도형 내부를 채운 사각형(`R`)을 그린다.

### 첫번째 이후의 행01: r X Y WIDTH HEIGHT CHAR

윤곽선만 있는 사각형을 그린다.

- `r`: 문자 `r`이 입력된다.
- `X`: 사각형의 왼쪽 상단의 x좌표를 나타내는 실수값
- `Y`: 사각형의 왼쪽 상단의 y좌표를 나타내는 실수값
- `WIDTH`: 사각형의 가로 길이를 나타내는 0이 아닌 양의 실수값
- `HEIGHT`: 사각형의 세로 길이를 나타내는 0이 아닌 양의 실수값
- `CHAR`: 사각형을 그리는데 사용할 문자

### 첫번째 이후의 행02: R X Y WIDTH HEIGHT CHAR

도형 내부를 `CHAR`로 채운 사각형을 그린다.

- `R`: 문자 `R`이 입력된다.
- `X`: 사각형의 왼쪽 상단의 x좌표를 나타내는 실수값
- `Y`: 사각형의 왼쪽 상단의 y좌표를 나타내는 실수값
- `WIDTH`: 사각형의 가로 길이를 나타내는 0이 아닌 양의 실수값
- `HEIGHT`: 사각형의 세로 길이를 나타내는 0이 아닌 양의 실수값
- `CHAR`: 사각형을 그리는데 사용할 문자

### 참고사항

- 도형을 그릴 구역의 문자 하나하나를 픽셀이라고 부르기로 한다.
- 사각형의 테두리로부터 1보다 크거나 같은 거리를 가진 왼쪽 상단의 픽셀은 빈 직사각형에 포함되지 않는다.
- 사각형의 테두리에서 1보다 작은 거리를 가진 왼쪽 상단의 픽셀은 빈 직사각형에 포함된다.

빈 직사각형에 포함된다/안된다 부분이 좀 어려운데 이런 식으로 해석하면 될 것 같다.

- `r 2.5 1.5 1 1 X`: 이건 거리가 1이므로, 빈 직사각형이 아님
- `r 2.5 1.5 0.8 0.8 x`: 이건 거리가 1보다 작으므로, 빈 직사각형임

그러니까, 왼쪽 상단의 한 픽셀만큼의 크기를 가진 직사각형을 빈 직사각형에 포함을 시키느냐 마느냐의 문제 때문에 추가한 내용인 걸로 보인다. 어쨌든 왼쪽 상단의 픽셀을 기준으로 했을 때, 가로, 세로 길이가 1보다 작은 경우에는 빈 직사각형에 포함시킨다는 이야기인 듯 하다. 해석이 맞는지는 차차 검증해보기로 한다.

### 힌트

사각형의 좌측 상단이 (Xtl, Ytl)이고, 우측 하단이 (Xbr, Ybr)이일때, 점 (Xa, Ya)가 `(Xtl <= Xa <= Xbr) && (Ytl <= Ya <= Ybr)`를 만족한다면 이 점은 사각형의 범위 안에 있다.

## Mini_paint

윤곽선만 있는 원(`c`) 또는 도형 내부를 채운 원(`C`)을 그린다.

### 첫번째 이후의 행01: c X Y RADIUS CHAR

윤곽선만 있는 원을 그린다.

- `c`: 문자 `c`가 입력된다.
- `X`: 원 중점의 x좌표를 나타내는 실수값
- `Y`: 원 중점의 y좌표를 나타내는 실수값
- `RADIUS`: 원의 반지름을 나타내는 0이 아닌 양의 실수값
- `CHAR`: 원을 그리는데 사용할 문자

### 첫번째 이후의 행02: C X Y RADIUS CHAR

도형 내부를 `CHAR`로 채운 원을 그린다.

- `C`: 문자 `C`가 입력된다.
- `X`: 원 중점의 x좌표를 나타내는 실수값
- `Y`: 원 중점의 y좌표를 나타내는 실수값
- `RADIUS`: 원의 반지름을 나타내는 0이 아닌 양의 실수값
- `CHAR`: 원을 그리는데 사용할 문자

### 참고사항

- 좌측 상단의 픽셀과 원의 중점의 거리가 반지름보다 작거나 같으면, 그 픽셀은 원의 일부이다.
- 또한: 원의 테두리로부터 거리가 1보다 크거나 같은 거리를 가진 좌측 상단의 픽셀은 빈 원의 일부가 아니다. 원의 테두리로부터 1보다 작은 거리를 가진 좌측 상단의 픽셀은 빈 원의 일부이다.

사례:

- `C 1.5 1.5 1 0 @`: 반지름이 1이므로 2칸 크기만큼 그려진다. 따라서, (1,1), (1,2), (2,1), (2,2) 이렇게 네 개의 픽셀이 `@`문자로 바뀐다.

요약하자면 좌측 상단의 픽셀을 중심으로 그리는 게 중요하다는 의미인 듯 하다.

### 힌트

두 개의 점((Xa, Ya), (Xb, Yb)) 거리를 구하는 공식: `srqt((Xa - Xb) * (Xa - Xb) + (Ya - Yb) * (Ya - Yb))`
